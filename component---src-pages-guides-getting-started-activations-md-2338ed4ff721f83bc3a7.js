(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9881],{606:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return r},default:function(){return u}});var a=t(22122),o=t(19756),i=(t(15007),t(64983)),s=t(99536),c=["components"],r={},d={_frontmatter:r},l=s.Z;function u(e){var n=e.components,t=(0,o.Z)(e,c);return(0,i.mdx)(l,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"retrieve-action-invocation-results"},"Retrieve Action Invocation Results"),(0,i.mdx)("p",null,"The activation record contains information that helps you understand what happened: activation ID (the unique indentifier), namespace and action name, logs (if any), response (a dictionary that contains the status, success, and result)."),(0,i.mdx)("h2",{id:"activations-ttl"},"Activations TTL"),(0,i.mdx)("p",null,"The activation TTL (Time To Live) is seven days. This is a system setting, not a user setting (it can't be changed by developers)."),(0,i.mdx)("p",null,"Thus, if you don't see any activations or not seeing an activation you know that has happened, it could be that they happend more than 7 days ago."),(0,i.mdx)("h2",{id:"example"},"Example"),(0,i.mdx)("p",null,"Assuming that you","â€™","ve invoked an action called ",(0,i.mdx)("inlineCode",{parentName:"p"},"hello"),", this is how you retrieve the latest activations:"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"wsk activation list")),(0,i.mdx)("p",null,"The result will be a list of activation IDs (if any) and the action invoked for each:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"e9932762894d4ccf932762894d6ccff4 hello            \nc76dbe66e9b04ad5adbe66e9b06ad541 hello            \n[]...]\n")),(0,i.mdx)("p",null,"You can retrieve the whole activation record by running ",(0,i.mdx)("inlineCode",{parentName:"p"},"wsk activation get <activation id>"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},'wsk activation get e9932762894d4ccf932762894d6ccff4\nok: got activation e9932762894d4ccf932762894d6ccff4\n{\n    "namespace": "your-namespace",\n    "name": "hello",\n    "version": "0.0.20",\n    "subject": "your-namespace",\n    "activationId": "e9932762894d4ccf932762894d6ccff4",\n    "start": 1542232412321,\n    "end": 1542232412366,\n    "duration": 45,\n    "response": {\n        "status": "success",\n        "statusCode": 0,\n        "success": true,\n        "result": {\n            "body": {\n                "payload": {\n                    "message": "hello world!"\n                }\n            },\n            "statusCode": 200\n        }\n    },\n    "logs": [],\n    "annotations": [\n        {\n            "key": "path",\n            "value": "your-namespace/hello"\n        },\n        {\n            "key": "waitTime",\n            "value": 23\n        },\n        {\n            "key": "kind",\n            "value": "nodejs:10-fat"\n        },\n        {\n            "key": "limits",\n            "value": {\n                "logs": 10,\n                "memory": 256,\n                "timeout": 60000\n            }\n        },\n        {\n            "key": "initTime",\n            "value": 40\n        }\n    ],\n    "publish": false\n}\n')),(0,i.mdx)("p",null,"Or you can extract a specific part from the activation record:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"// just the result\nwsk activation result <activation ID>\n\n// just the logs\nwsk activation logs <activation ID>\n")),(0,i.mdx)("h2",{id:"retrieving-activations-for-blocking-successful-calls"},"Retrieving Activations for Blocking Successful Calls"),(0,i.mdx)("p",null,"At scale, when you run millions of activations in a day, it may be difficult to extract the activations that failed in order to debug them. To help with this task, the system skips persisting the activation that succeeded. "),(0,i.mdx)("p",null,"The exceptions are asynchronous actions that are invoked in a non-blocking fashion. Their results are persisted regardless\nso that you can extract the response of the action at a later time. "),(0,i.mdx)("p",null,"You can still view the number of executions, please see the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-runtime/blob/master/guides/logging_monitoring.md"},"Logging and Monitoring")," section. "),(0,i.mdx)("p",null,"However, during development it is important to have access to all activation results. You can enable this by setting in the request the extra logging header to ",(0,i.mdx)("inlineCode",{parentName:"p"},"on"),": "),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"X-OW-EXTRA-LOGGING: on\n")),(0,i.mdx)("blockquote",null,(0,i.mdx)("p",{parentName:"blockquote"},"It's not recommended to use the extra logging headers in the production environment as invocation performance can be impacted. ")),(0,i.mdx)("h2",{id:"retrieving-activations-for-non-blocking-calls"},"Retrieving Activations for Non-blocking Calls"),(0,i.mdx)("p",null,"When you execute a non-blocking action (async action), the action returns immediately the activation ID. If you query for the result or logs before the action finished the execution you get an error:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"wsk activation get 1d24121f91384740a4121f91389740f0\nerror: Unable to get activation '1d24121f91384740a4121f91389740f0': The requested resource does not exist. (code myM2aaCufgIcnjnrbNIHztNmhL2HvFia)\n\n\nwsk activation logs c8c4f354c1824f2c84f354c182ef2cdb\nerror: Unable to get logs for activation 'c8c4f354c1824f2c84f354c182ef2cdb': The requested resource does not exist. (code nCPo4KRbYmvOTcwPQVfDJdrwtJpv1c3d)\n")),(0,i.mdx)("p",null,"This should give you enough tools to debug your first actions. If you want to read more, take a look at the ",(0,i.mdx)("a",{parentName:"p",href:"../guides/logging_monitoring.md",title:"Logging and Monitoring"},"Logging and Monitoring")," page."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-getting-started-activations-md-2338ed4ff721f83bc3a7.js.map